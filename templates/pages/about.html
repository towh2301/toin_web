{% load static %}
{% load i18n %}
{% block about %}
    <section id="about" class="about portfolio section light-background">
        <div class="container section-title" data-aos="fade-up">
            <h2>{% trans "ABOUT US" %} {{ about_data }}</h2>
            <p>
                <span>{% trans "Discover" %}</span> <span class="description-title">{% trans "Our Story" %}</span>
            </p>
        </div>
        <div class="container">
            <div class="isotope-layout"
                 data-default-filter=".filter-history"
                 data-layout="masonry"
                 data-sort="original-order">
                <ul class="portfolio-filters isotope-filters"
                    data-aos="fade-up"
                    data-aos-delay="100">
                    <li data-filter=".filter-history" class="filter-active">{% trans "Company History" %}</li>
                    <li data-filter=".filter-company">{% trans "Company Information" %}</li>
                    <li data-filter=".filter-offices">{% trans "Vietnam Offices" %}</li>
                </ul>
                <div class="row gy-4 isotope-container"
                     data-aos="fade-up"
                     data-aos-delay="200">
                    <!-- History Item -->
                    <div class="isotope-item filter-history bg-white rounded-3 shadow-sm p-4 transition">
                        <div class="portfolio-info d-flex flex-column gap-3">
                            <h4 class="fs-4 fw-semibold text-dark mb-0">{% trans "Company History" %}</h4>
                            <p class="fs-6 text-secondary mb-0">{% trans "Explore key milestones of TOIN CO., LTD." %}</p>
                            <div class="history-details mt-3">
                                {% for his in history %}
                                    <div class="border-top border-bottom py-3">
                                        <dl class="row align-items-center mb-0">
                                            <dt class="col-sm-3 fw-semibold text-dark">{{ his.year }}</dt>
                                            <dd class="col-sm-9 text-secondary mb-0">
                                                {{ his.get_description }}
                                            </dd>
                                        </dl>
                                    </div>
                                {% empty %}
                                    <p class="text-muted mb-0">No history available.</p>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    <!-- Company Information Item -->
                    <div class="isotope-item filter-company bg-white rounded-3 shadow-sm p-4 transition">
                        <div class="portfolio-info d-flex flex-column gap-3">
                            <h4 class="fs-4 fw-semibold text-dark mb-0">{% trans "Company Information" %}</h4>
                            <p class="fs-6 text-secondary mb-0">{% trans "Discover some information of TOIN VIETNAM CO,. LTD." %}</p>
                            <div class="history-details mt-3">
                                <div class="border-top border-bottom py-3">
                                    <dl class="row align-items-center mb-0">
                                        <dt class="col-sm-3 fw-semibold text-dark">{% trans "Company Name" %}</dt>
                                        <dd class="col-sm-9 text-secondary mb-0">
                                            {{ company_profile.company_name }}
                                        </dd>
                                    </dl>
                                </div>
                                <div class="border-top border-bottom py-3">
                                    <dl class="row align-items-center mb-0">
                                        <dt class="col-sm-3 fw-semibold text-dark">{% trans "Address" %}</dt>
                                        <dd class="col-sm-9 text-secondary mb-0">
                                            {{ company_profile.get_address }}
                                        </dd>
                                    </dl>
                                </div>
                                <div class="border-top border-bottom py-3">
                                    <dl class="row align-items-center mb-0">
                                        <dt class="col-sm-3 fw-semibold text-dark">{% trans "Founded" %}</dt>
                                        <dd class="col-sm-9 text-secondary mb-0">
                                            {{ company_profile.foundation_date }}
                                        </dd>
                                    </dl>
                                </div>
                                <div class="border-top border-bottom py-3">
                                    <dl class="row align-items-center mb-0">
                                        <dt class="col-sm-3 fw-semibold text-dark">{% trans "Capital" %}</dt>
                                        <dd class="col-sm-9 text-secondary mb-0">
                                            {{ company_profile.capital }}
                                        </dd>
                                    </dl>
                                </div>
                                <div class="border-top border-bottom py-3">
                                    <dl class="row align-items-center mb-0">
                                        <dt class="col-sm-3 fw-semibold text-dark">{% trans "Industry" %}</dt>
                                        <dd class="col-sm-9 text-secondary mb-0">
                                            {{ company_profile.get_productions_operations }}
                                        </dd>
                                    </dl>
                                </div>
                                <div class="border-top border-bottom py-3">
                                    <dl class="row align-items-center mb-0">
                                        <dt class="col-sm-3 fw-semibold text-dark">{% trans "Mission" %}</dt>
                                        <dd class="col-sm-9 text-secondary mb-0">
                                            {{ company_profile.get_mission }}
                                        </dd>
                                    </dl>
                                </div>
                                {% for office in company_profile.office_addresses.all %}
                                    {% if "FACTORY" in office.en_name %}
                                        {% with contact=office.contact_addresses.first %}
                                            {% if contact %}
                                                <div class="border-top border-bottom py-3">
                                                    <dl class="row align-items-center mb-0">
                                                        <dt class="col-sm-3 fw-semibold text-dark">{% trans "Contact" %}</dt>
                                                        <dd class="col-sm-9 text-secondary mb-0">
                                                            Email:
                                                            <a href="mailto:{{ contact.contact_email }}">{{ contact.contact_email }}</a>
                                                            |
                                                            Phone: {{ contact.contact_number }}
                                                        </dd>
                                                    </dl>
                                                </div>
                                            {% endif %}
                                        {% endwith %}
                                    {% endif %}
                                {% endfor %}
                                <div class="border-top border-bottom py-3">
                                    <dl class="row align-items-center mb-0">
                                        <dt class="col-sm-3 fw-semibold text-dark">{% trans "Parent Companies" %}</dt>
                                        <!-- Parent Webs -->
                                        {% for corp in company_profile.parent_corporations.all %}
                                            <dd class="col-sm-9 text-secondary mb-0">
                                                <a href="{{ corp.website }}" target="_blank">{{ corp.get_name }}</a>
                                            </dd>
                                            <dt class="col-sm-3 fw-semibold text-dark"></dt>
                                        {% empty %}
                                            <dd>
                                                No parent corporations for this company.
                                            </dd>
                                        {% endfor %}
                                    </dl>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Offices Item -->
                    {% for addr in company_profile.office_addresses.all %}
                        <div class="col-lg-6 col-md-6 col-sm-12 portfolio-item isotope-item filter-offices">
                            <div class="card shadow-sm border-0 rounded-3 overflow-hidden">
                                <div class="ratio ratio-4x3">
                                    <iframe src="{{ addr.address_link }}"
                                            allowfullscreen
                                            loading="lazy"
                                            referrerpolicy="no-referrer-when-downgrade">
                                    </iframe>
                                </div>
                                <div class="card-body bg-white">
                                    <h4 class="fw-bold text-uppercase mb-2 text-dark">{{ addr.get_name }}</h4>
                                    <p class="mb-2">
                                        <strong>{% trans "Address" %}:</strong>
                                        <br>
                                        {{ addr.get_address }}
                                    </p>
                                    {% if addr.contact_number %}
                                        <p class="mb-1">
                                            <strong>TEL:</strong> {{ addr.contact_number }}
                                        </p>
                                    {% endif %}
                                    {% if addr.fax_number %}
                                        <p class="mb-1">
                                            <strong>FAX:</strong> {{ addr.fax_number }}
                                        </p>
                                    {% endif %}
                                    {% if addr.contact_addresses.all %}
                                        <div class="mt-2">
                                            <strong>{% trans "Contact" %}:</strong>
                                            <ul class="list-unstyled mb-0">
                                                {% for contact in addr.contact_addresses.all %}
                                                    <li>
                                                        {% if contact.contact_name != "TOIN" %}
                                                            <span class="fw-semibold">{{ contact.get_full_details }}</span>
                                                        {% else %}
                                                            <span class="fw-semibold">{{ contact.get_contact }}</span>
                                                        {% endif %}
                                                        {% if contact.contact_email != "No Data" %}
                                                            -
                                                            <a href="mailto:{{ contact.contact_email }}">{{ contact.contact_email }}</a>
                                                            <br />
                                                        {% endif %}
                                                    </li>
                                                {% endfor %}
                                            </ul>
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>
{% endblock about %}
